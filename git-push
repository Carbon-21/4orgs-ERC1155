#!/bin/bash
#push changes to current branch

#get commit message stop execution if it was not provided
msg=$1
if [ $# -eq 0 ]; then
    echo "Please provide a commit message, as in:"
    echo "./git-push 'inclus√£o do campo X na chamada Y'"
    exit 1
fi

#might avoid merge conflicts on PRs
#if conflicts already exist, carry on with the push and good luck to the reviewer ;)
echo "Pulling..."
git pull

#prepare to push
git add -A
git commit -m "$msg"

#get current branch and push to it
branch=$(git rev-parse --abbrev-ref HEAD)
echo "Pushing..."
git push origin $branch