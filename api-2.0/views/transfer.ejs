<!DOCTYPE html>
<html lang="en" dir="ltr">
  <%- include("partials/head") %>

  <body>
    <!-- Navbar -->

    <%- include("partials/navbar") %>

    <section id="transfer">
      
        <h1 class="transfer-header">Transferência</h1>

        <div class="container-fuid transfer-container">
        
        <div class="card shadow-lg">
          <div class="card-body">
            <div class="justify-content-between p-md-1">
              
              <form action="" onsubmit="buttonPressed()" class="validated-form" novalidate>
                <div class="flex-fill">
                  <div class="transfer-data">
                    <i class="fas fa-user fa-lg"></i>
                    <input
                      type="text"
                      name="usernameSource"
                      id="usernameSource"
                      class="form-control"
                      required
                    />
                  </div>
                  <label class="form-label" for="usernameSource">Insira o username de origem</label>
                </div>

                <hr />

                <div class="flex-fill">
                  <div class="transfer-data">
                    <i class="fas fa-user fa-lg"></i>
                    <input
                      type="text"
                      name="usernameDest"
                      id="usernameDest"
                      class="form-control"
                      required
                    />
                  </div>
                  <label class="form-label" for="usernameDest">Insira o username de destino</label>
                </div>

                <hr />

                <div class="flex-fill">
                  <div class="transfer-data">
                    <i class="fas fa-coins fa-lg"></i>
                    <input type="text" name="tokenId" id="tokenId" value="$ylvas" class="form-control" required />
                  </div>
                  <!-- NOTE: TokenId é para tranferir nfts? E para fts é fixo em "$ylvas"? -->
                  <label class="form-label" for="tokenId">Insira o token Id (*altere caso NFT)</label>
                </div>

                <hr />

                <div class="flex-fill">
                  <div class="transfer-data">
                    <i class="fas fa-coins fa-lg"></i>
                    <input type="text" name="qty" id="qty" class="form-control" required />
                  </div>
                  <label class="form-label" for="qty">Insira a quantidade a ser transferida</label>
                </div>

                <script type="text/javascript">
                  function buttonPressed() {
                  // Request
                  sendRequest("TransferFrom");
                  // Alterna visibilidade de botao e gif de carregamento
                  document.getElementById("loader").style.display = "flex";
                  document.getElementById("submitButton").style.display = "none";
                  }
                </script>
                <div class="transfer-button">
                    <img id="loader" class="loading-icon" src="./images/loader.gif" />
                    <button id="submitButton" type="submit" class="btn btn-primary btn-md">Transferir</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </section>

    <script>
      // Example starter JavaScript for disabling form submissions if there are invalid fields
      (function () {
        'use strict'

        // Fetch all the forms we want to apply custom Bootstrap validation styles to
        const forms = document.querySelectorAll('.validated-form')

        // Loop over them and prevent submission
        Array.from(forms)
          .forEach(function (form) {
            form.addEventListener('submit', function (event) {
              if (!form.checkValidity()) {
                event.preventDefault()
                event.stopPropagation()
              }

              form.classList.add('was-validated')
            }, false)
          })
      })()
    </script>
    
  </body>

</html>
